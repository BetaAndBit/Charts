[
  {
    "objectID": "factory.html#why-do-we-need-charts",
    "href": "factory.html#why-do-we-need-charts",
    "title": "1  Factory of Taste",
    "section": "1.1 Why do we need charts?",
    "text": "1.1 Why do we need charts?\n\nWe create charts, to show the stories hidden in the data. The stories might be straightforward (e.g., in 2014 more children were born than in 2013) or complex (the number of children born is connected with the demographic structure, one of the important factors is the fact that people from the demographic boom are in the reproductive period, additionally the negative migration balance comes to play). The more complex the story is, the more effort is needed to present it in a readable way.\n\nTo express a simple story no chart is needed, in the case of a complex one - it is. Let’s illustrate it using data from the Polish National Census of Population and Housing from 2011.\n\n\n\n\n\n\nFigure 1.1: 38,511,800 people live in Poland. 48,1% of whom are men, and 51,6% of whom are women. Polish National Census of Population and Housing 2011\n\n\nSource: Gazeta Wyborcza.\nLet’s compare three ways of telling the story about the number and structure of Polish population: a diagram on the margin, the table below and the description of the table below.\n\n \n\nThe Polish National Census of Population and Housing 2011 established that 38 511 800 people live in Poland, 51.6% of whom are women, and 48,4% of whom are men.\n\n\nThe whole story can be concluded with the statement that there are more women than men in the Polish population. Do we need a chart to show three numbers? Would a chart make them more understandable or provide some additional information? No and no. The table has a clear and simple to read structure. One sentence of description communicates the relevant information. And the chart? We like pictures but when it comes to showing information, this plot doesn’t show anything relevant.\n\nThe situation is different, when we have a complex announcement to convey, based on a large dataset. We will see a story of Polish final high-school exams in the years 2013-2014. Let’s compare the three ways of presenting this story: a text description, the table below and a picture.We will use the data made available by the Team of Educational Surveys of the Educational Studies Institute in Poland\n\n\nThe Polish Language exam scores have a distribution similar to a normal distribution. In the compared years the means of the distribution differ slightly. The distribution is disturbed in the neighborhood of 21-22 points, so near the values that is considered a passing grade (30/% of the possible score). There are hardly any students who scored one point below the passing grade, but there are many students, who passed the exam by scoring one point over. This suggests, that the teachers grading the exam decided to “find” the missing points for students who were just one point below the passing grade. When it comes to Math exam scores, the distributions are different in different years and they are very far from a normal distribution. Near the passing grade, there also is some irregularity, however, it is much smaller than for the Polish language exam.\n\n\n\n\n \n \nThe second story is based on over 220 numbers collected in an enormous table. In such a situation, the precision and structure of a table overfilled with data doesn’t give us any insight. There are too many numbers to quickly notice any kind of dependency, and the excerpt presented here is just a twelfth of the entire table. When it comes to the text description, the less focused readers can lose track of the conclusion. The description isn’t complete, and reading takes more than 10 seconds. For this story, the chart presents the data with almost the same accuracy as the table, but can be read much quicker. Illustrating the story skillfully allows for its more readable and fuller presentation.\n\nHow to create such memorable charts? You need two things. A knowledge of the basic principles of creating charts and lots and lots of practice in preparing plots yourself. The principles will be described in the following chapters of this book. In each chapter, there are tasks allowing you to actively practice the topics from the book. Abiding by these rules, you will be able to repeatably create readable and standardized charts. And standards are very important."
  },
  {
    "objectID": "factory.html#musical-notation",
    "href": "factory.html#musical-notation",
    "title": "1  Factory of Taste",
    "section": "1.2 Musical notation",
    "text": "1.2 Musical notation\n\nMusical notation - a symbolic language, using which almost all characteristics of musical sounds, rythms, melodies, harmonies, dynamics and articulation can be written\n\n\n\n\n\n\nFigure 1.2: A fragment of Chopin’s Prelude No 7\n\n\nSource: Wikipedia.\nAn excelent example of a standard notation used by professionals is musical notation. The figure in the margin shows a fragment of Chopin’s Prelude No 7. It can be read by anyone who knows the notation, the basics of which we’re introduced to in primary school.\n\nWhy do composers stick to the musical notation, instead of creating their own ways to write music? Why don’t they color in the notes of draw pictures on the staff? Why aren’t there any suns, or cats or anything else?\n\nIt’s not the matter of print costs. The price of colored ink is not so high as to force everybody to use black-and-white musical notation. The reason is obviously the standard, which needs to be read consistently by the composer and the performer. Playing an instrument is a challenging task in itself so no musician wants to be distracted by additional stimuli such as colorful notes, perspective or staff decoration."
  },
  {
    "objectID": "factory.html#technical-drawing",
    "href": "factory.html#technical-drawing",
    "title": "1  Factory of Taste",
    "section": "1.3 Technical drawing",
    "text": "1.3 Technical drawing\n\n*Technical drawing - a convention for graphical representation of machines, mechanisms, devices, constructions, circuits, systems etc., providing full information about the operation and production of elements as well as the installation of the depicted object.\n\n\n\n\n\n\nFigure 1.3: Technical drawing of a shed\n\n\nSource: Wikipedia.\nDear Reader, have you ever wondered, why constructors adhere to a rigid framework of the technical drawing, instead of coloring and beautifying various elements of the project to graphically diversify their creations? Does that sound like heresy? Why doesn’t one constructor want to stand out from the others by drawing colorful three-dimensional arrows?\n\nSimilar to the example with musical notation, here the recipient of one project can be a large group of different people. In the municipal office, the drawing will be the basis for issuing the construction approval documents, the construction crew will use it to construct the building. Nobody wants communication errors. Misunderstood symbols might lead to the creation of non-functional buildings, and in the worst case to a disaster.\n\nThe constructor must think about many aspects connected with the functionality, safety and durability of devised constructions concurrently. But nobody expects them to come up with an original way to write their project. Creativity is needed for the project and not for the way of writing it down."
  },
  {
    "objectID": "factory.html#uml-diagrams",
    "href": "factory.html#uml-diagrams",
    "title": "1  Factory of Taste",
    "section": "1.4 UML Diagrams",
    "text": "1.4 UML Diagrams\n\n\nUnified Modeling Language (UML) – semi-formalized language used to model different kinds of IT systems. \n\n\n\n\n\n\nFigure 1.4: Exemplary UML diagram for a computer system connecting to a server\n\n\nSource: Wikipedia.\nSimilar to the previous examples, an IT system designer needs to describe their project in such a way that it is made according to the specification. There is simply no place for ambiguity.\n\nAn IT project will be made by a numerous group of programmers and then verified by a large group of testers. They all need to be able to read the designer’s intentions to build the designed software. For this purpose special languages were developed (see the example in the margin) allowing their users to write down even the most complex systems visually, in a readable way.\n\nSoftware engineering is a relatively young field, so there are numerous badly designed and described system which then stopped working. But issues with costly fixes of non-functioning software caused the standardization of processes, as well as the language for describing IT systems."
  },
  {
    "objectID": "factory.html#electrical-diagram",
    "href": "factory.html#electrical-diagram",
    "title": "1  Factory of Taste",
    "section": "1.5 Electrical diagram",
    "text": "1.5 Electrical diagram\n\nElectrical diagram – a graphical construction document, on which using graphical symbols, parts of an electrical circuit and connections between them are represented.\n\n\n\n\n\n\nFigure 1.5: An exemplary diagram of an amplifier\n\n\nSource: Wikipedia.\nYou can create examples of many industries, for which standardization was necessary for a effective and faultless communication between creators and their audiences. The figure in the margin depicts an electrical diagram, on which standardized symbols illustrate inductors, resistors, switches and other elements. Each of those symbols has an unambiguous and strictly regulated meaning. Without this standardization, the effective production of developed circuits, based on a clear communication between designers of circuits and their creators and users, would not be possible.\n\nIn each of the above cases, standardization allowed for a wider reception of the developed solution. It made the unambiguous reception easier. These pictures are made by professionals and for professionals. A composer writes down melodies for a musician. A constructor describes a building for the building crew. An IT system designer characterizes the project for programmers etc."
  },
  {
    "objectID": "factory.html#what-happens-when-there-are-no-standards",
    "href": "factory.html#what-happens-when-there-are-no-standards",
    "title": "1  Factory of Taste",
    "section": "1.6 What happens when there are no standards?",
    "text": "1.6 What happens when there are no standards?\n\nThe creation of charts is a relatively young field and until now it was rarely taught on a large scale. In the primary school we learn notes, in high school we learn electrical diagrams, but there are few places, where you can learn how to create plots. Maybe this will change, and Data Literacy classes will be brought to primary schools, but for now only a narrow group of universities offered such a course. Still, most plot creators are self-taught, which sadly doesn’t do well for consistency in data presentation.\n\n\n\n\n\nFigure 1.6: Selected bar charts from the Polish National Census of Population and Housing 2011 report. The plots are grouped in rows by their size and background color\n\n\n\n\nAnd the lack of standardization can lead to a mess. As an example we can study the report from the Statistics Poland concerning the Polish National Census of Population and Housing of 2011. The report is relatively short but it contains a lot of graphically represented data, often using bar charts (Główny Urząd Statystyczny 2012). Despite the fact that the same kind of plot is used, on different pages they are presented in very different ways. The figure above showcases 15 various examples from this report (and that’s not all of them). The plots differ in nearly every aspect. Sometimes the data is represented vertically, sometimes horizontally. Sometimes a 3D perspective is used, and sometimes it isn’t. Sometimes the bars have shadows, and sometimes they don’t. Sometimes they are red and blue, sometimes a gradient of navy blue is used, and sometimes they’re orange, yellow and green. It’s difficult to believe that they come from the same publication.\n\n\nGłówny Urząd Statystyczny. 2012. Narodowy Spis Powszechny Ludności i Mieszkań 2011. Raport z Wyników."
  },
  {
    "objectID": "factory.html#communication-standards-concerning-charts-a-case-study-on-the-statistics-poland",
    "href": "factory.html#communication-standards-concerning-charts-a-case-study-on-the-statistics-poland",
    "title": "1  Factory of Taste",
    "section": "1.7 Communication standards concerning charts, a case study on the Statistics Poland",
    "text": "1.7 Communication standards concerning charts, a case study on the Statistics Poland\n\nIn the previous section, we’ve presented a report of the Statistics Poland full of inconsistent charts. However, there has been a lot of development in the manner of creating data reports in this institution since 2011.\n\nAn example of such activity is a set of rules concerning creating reports of maps (Statistics Poland 2017). The developed handbook depicts a lot of aspects of statistical communication and is full of specific and very practical advice, what to do and what not to do in data communication.\n\n\nStatistics Poland. 2017. Statistical Maps. Data Visualisation Methods. Statistical Research Papers. https://stat.gov.pl/statystyka-regionalna/publikacje-regionalne/podreczniki-atlasy/podreczniki/statistical-maps-data-visualisation-methods,3,1.html.\n \nFrom this handbook the Figure 1.8 is sourced, explaining which projection should be used for presenting data on the map of Europe, and which projections should be avoided. The reports developed in conformance with these standards will be more consistent and it will be easier to compare results between the reports from various years, created by different people.\n\n\n\n\n\n\n\nFigure 1.7: Two exemplary pictures showing which shapes to use and which to avoid while communicating using plots. Source: Statistical maps, Statistics Poland.\n\n\n\n\n\n\nFigure 1.8: Choropleth depicting two variables using color. A clever encoding increases the amount of information presented on the plot. Source: Statistical maps, Statistics Poland.\n\n\nThe Statistics Poland’s publication discusses not onlychoropleths, but also contains many useful and practical pieces of advice about the creation of charts. There are also recommendations for using different shapes (Figure 1.9). The use of shading, perspective, unnecessary gradients and other visual effects is discouraged.\n\nThe aforementioned standards additionally contain a set of interesting visual solutions for data presentation. An example is the choropleth from Figure 1.10, where the colors encode two variables – a percentage of people with higher education and the GDP per capita. The use of appropriate color scales allows for a significant compression of data presented on the chart."
  },
  {
    "objectID": "factory.html#communication-standards-a-case-study-based-on-the-economist-newspaper",
    "href": "factory.html#communication-standards-a-case-study-based-on-the-economist-newspaper",
    "title": "1  Factory of Taste",
    "section": "1.8 Communication standards, a case study based on “The Economist” newspaper",
    "text": "1.8 Communication standards, a case study based on “The Economist” newspaper\n\nNot only the reports of statistical offices are full of charts. Increasingly, advanced visualizations are included in newspapers and other information outlets. “The Economist”, “The Guardian”, “The New York Times” are some of the first large newspapers that have treated the data visualization standards in a serious way. Out of respect for their readers, the biggest and best newspapers came up with unified, readable and characteristic standards of data presentation and some of them even shared these standards publicly. An example of a newspaper which publicized their standards is “The Economist”.\n\nThe standards of “The Economist” (McLean 2017) contain very precise information on how large the graphical elements should be, both in the computer, as well as cell phone version. On one page of the newspaper, very often you can find a few diagrams. No wonder, that they need to be consistent.\n\n\nMcLean, Matt. 2017. The Economist Visual Styleguide. https://design-system.economist.com/.\n\n\n\n\nFigure 1.9: Detailed rules concerning the size of titles, legends and colors on the presented charts. Source: The Economist visual styleguide.\n\n\n\n\nThe visual communication of “The Economist” is very coherent. In the standards, five kinds of charts are described: two types of bar charts, one of which contains overlaid bars, a scatter plot, a line plot and a temperature graph. For each of them very strict rules defining colors, typefaces, line thicknesses and what sizes of elements should be used to get a unified visual effect."
  },
  {
    "objectID": "factory.html#communication-standards-a-case-study-based-on-the-ibcs",
    "href": "factory.html#communication-standards-a-case-study-based-on-the-ibcs",
    "title": "1  Factory of Taste",
    "section": "1.9 Communication standards, a case study based on the IBCS",
    "text": "1.9 Communication standards, a case study based on the IBCS\n\nThe standards presented in the two previous subsections were developed for the internal purposes of the institutions. Both, the Statistics Poland, as well as “The Economist” created a set of standards so that their reports, newspapers, websites would be more visually consistent. But there are also standards developed for external organizations, with the same goal of making the communication more coherent. An example would be the International Business Communication Standards (2022). This set of rules was developed as a result of a cooperation of Rolf Hichert and Jürgen Faisst. Currently it is being developed in a very transparent manner by the IBCS organization. Most materials can be found for fre on the website of this organization.\n\n\nThe IBCS Institute. 2022. The International Business Communication Standards (IBCS). https://www.ibcs.com/.\n\n\n\n\nFigure 1.10: Examples of rules from IBCS standards. Source: IBCS Standards.\n\n\n\n\nIn Figure 1.10 we’ve shown six chosen recommendations present in the IBCS standards. They correspond to a very operational tips: Don’t use irregular symbols to show data. Rely on standard shapes. Make sure that the intervals on the axes are of the same length. Start the bars at zero. Instead of pie charts, use the more informative bar charts. Do not use perspective, shadows and 3D effects – ever. Don’t use colors if they don’t bare any meaning.\n\nStandards contain many very detailed tips and recommendation which are grouped into 7 rules of good communication. The rules with a short description are presented in the Table below.\n\n\nThe essential seven rules of IBCS. For each of the rules on the website http://www.ibcs-a.org detailed examples are presented, showcasing what to avoid and what to use.\n\n\nRule\nDescription\n\n\n\n\nSay\nConvey a specific, relevant message.\n\n\nUnify\nUse unified markings.\n\n\nCondense\nIncrease the amount of information in the smallest possible form factor.\n\n\nCheck\nMake sure the charts and tables are coherent.\n\n\nExpress\nChoose the right manner of presentation (description, plot, table) for the data.\n\n\nSimplify\nAvoid unnecessary decorations.\n\n\nStructure\nMake sure there is a readable structure.\n\n\n\n\n\n\n\n\nFigure 1.11: The IBCS rules can be applied in an iterative manner. Some of the rules enrich the plot or report by adding more information, and some are connected to the organization of elements to make finding information and reading easier."
  },
  {
    "objectID": "factory.html#tasks",
    "href": "factory.html#tasks",
    "title": "1  Factory of Taste",
    "section": "1.10 Tasks",
    "text": "1.10 Tasks\n\nFind an article, book or information outlet, which conveys information based on data. For example, you can use the BiQdata.pl portal, BeautifulNews or The New York Times. Based on this, perform the following tasks.\n\n\nThink about how complex the conveyed story is. How would it look like in the form of a table or text description? How long would a description conveying the same information be?\nChoose a chart and look at the SUCCESS rules. Does this chart conform to all seven rules?\nIn this chapter, we’ve talked about four domains in which standardized symbols are used for visual communication. Find another domain/area of use in which standardized communication schemas are used."
  },
  {
    "objectID": "recipes.html#quantitative-variable",
    "href": "recipes.html#quantitative-variable",
    "title": "2  Tried and Tested",
    "section": "2.1 Quantitative variable",
    "text": "2.1 Quantitative variable\nA quantitative variable is a variable describing the amounts of a certain quantity, e.g., height, age, weight, density, etc. For example, in the data presented, we have information for each product about the energy value per 100 g of that product. In the data, there are products with low energy values and those with very high values. But what values can we expect to find there? A histogram will help us answer this question.\nHistogram was first introduced by Karl Pearson in the late 19th century. The range of possible values of a quantitative variable is divided into intervals of equal length, and then for each interval, it is shown how many observations belong to it. The number of intervals often depends on the amount of data, the more data, the more intervals we can define. In the example below, we have 30 intervals, each with a width of 30 units.The name “histogram” comes from the Greek histos, meaning a ship’s mast or things placed vertically.\n\n\n\n\n\n\nFigure 2.2: Histogram and kernel density estimation – two of the most common ways of representing the distribution of quantitative variables\n\n\n\nFor a small number of data and a large number of intervals, the bars may have a high variability, making it difficult to read the relationship. In such a situation, smoothing can be applied, e.g., using a so-called kernel density estimator.\nFigure 2.2 shows both approaches to visualize the distribution of a quantitative variable. . It can be seen from these that we have a fair number of products with very low energy values in the data, most products have an energy value of up to 500 kcal, but there are also a few whose energy value exceeds 700 kcal.See Code It Yourself for instructions showing how to develop a histogram for any variable by yourself"
  },
  {
    "objectID": "recipes.html#quantitative-variable-in-subgroups",
    "href": "recipes.html#quantitative-variable-in-subgroups",
    "title": "2  Tried and Tested",
    "section": "2.2 Quantitative variable in subgroups",
    "text": "2.2 Quantitative variable in subgroups\nIf we already know everything about the behavior of one variable, the next step is usually to understand how similar or different the behavior of that variable is in subgroups of observations.\nOf course, we can plot side-by-side distributions of a particular variable separately for each group of observations. Such a technique for showing data in a grid of graphs is called small multiples. The first panel in the Figure 2.3 shows the distribution of energy values across subgroups using the aforementioned technique.\nIn the case of densities, a common solution is to draw curves for subgroups with different colors on a single panel. This makes it easy to see whether the distributions for two groups overlap or differ. An example of this solution is shown in the second panel of the chart below.\n\n\n\n\n\n\n\nFigure 2.3: Histogram presented using the small multiples technique, density plot including subsets of observations, box plot and violin plot. For three of these graphs, the colors are redundant because they do not encode relevant information, but we left them to make it easier to see the similarities between panels\n\n\n\nAn even more compact way of presenting the distribution is the so-called box-and-whisker plot, or simply boxplot. More than 60 years ago, John Tukey proposed to reduce distribution information to five numbers (the so-called Tukey’s five), namely the minimum, maximum, middle (median) and quartiles. These five numbers divide the set of observations into four parts of equal size. They can be represented by a box plot, in which the box is bounded by the quartiles (known as hinges), the line in the center of the box corresponds to the median, while the whiskers extend to the minimum and maximum values. It is also often assumed that the whiskers cannot be longer than one and a half times the width of the box, and all observations beyond this range are marked with dots - this is also the case in Figure 2.3. Such a plot allows a clear representation of the distribution for many subgroups.\nThe disadvantage of box plots is the difficulty in mapping multimodal distributions, as modality information is lost. The solution is violin plots, in which the density of the distribution of observations is presented in a way that resembles a violin, hence the name of this chart. It’s easier to see possible multimodality on it, but it’s harder to see what are the median and quartiles.\nIn the Figure 2.3, we see that most vegetables have a very low energy value – except for a few that reach above 200 kcal per 100 g (turns out to be dried seaweed or tomatoes). The exact opposite is true for nuts and seeds, most of which have a caloric value of more than 400 kcal per 100 g."
  },
  {
    "objectID": "recipes.html#qualitative-variable",
    "href": "recipes.html#qualitative-variable",
    "title": "2  Tried and Tested",
    "section": "2.3 Qualitative variable",
    "text": "2.3 Qualitative variable\nA qualitative variable is a variable that is not quantitative, its values are not measurements, but most often refer to various possible outcomes. Examples of such variables are eye color, nationality, occupation, etc. In the data described, the qualitative variable is the type of nutrient.\nTo see what values this variable takes and how often it takes them, it is most convenient to use a bar plot – see the first panels of the Figure 2.4. You can draw the bars vertically, but it is often better to draw them horizontally to have more space for category names on the axes. A bar chart is great for accurately representing counts.\n\n\n\n\n\n\n\n\nFigure 2.4: Horizontal and vertical bar plot, pie chart and the so-called treemap. These are the most common ways of representing the distribution of a single qualitative variable\n\n\n\nIf our goal is to show the relative frequencies of levels of a qualitative variable, pie charts or treemaps, presented in the third and fourth panels of the Figure 2.4, can be an interesting alternative. The precision of reading relative values is much lower, but it is easier to assess how many categories need to be combined to get a total of 25% or 50% of the total. Pie charts also have a fairly large group of opponents (rightly) claiming that any data can be presented more clearly in a plot of a different type."
  },
  {
    "objectID": "recipes.html#qualitative-variable-in-subgroups",
    "href": "recipes.html#qualitative-variable-in-subgroups",
    "title": "2  Tried and Tested",
    "section": "2.4 Qualitative variable in subgroups",
    "text": "2.4 Qualitative variable in subgroups\nAnd how to show the relationship between qualitative variables in subgroups? You can use a bar plot or donut chart for this. Examples of both charts are shown in Figure 2.5.\nIf we set the bars on top of each other and normalize them, it is easier to see the relative proportions within the groups. If we set them next to each other, it will be easier to compare absolute values.\nUsing a mosaic plot allows you to show both marginal and conditional distributions, but reading such charts requires some skill and quite a few people have problems with them, so this is more of a solution for advanced users. Using a donut chart inherits all the drawbacks of pie charts (such as difficulties in reading angles).\n\n\n\n\n\n\n\n\n\nFigure 2.5: Relationship between two qualitative variables depicted by a bar plot (bars on top of and next to each other), mosaic plot, and donut plot.\n\n\n\nThe above plots show the same data – the share of seven components in six randomly selected products. Which of these graphs most clearly shows information about these ingredients? Notice, Dear Reader, that for the last three products (pumpkin seeds, mascarpone cheese, dark chocolate), the proportion of fats is similar at about 45%. For two products, we have a similar amount of fiber (pumpkin seeds, dark chocolate). I leave it to the reader to judge which of these charts allows you to quickly notice this information."
  },
  {
    "objectID": "recipes.html#pair-of-quantitative-variables",
    "href": "recipes.html#pair-of-quantitative-variables",
    "title": "2  Tried and Tested",
    "section": "2.5 Pair of quantitative variables",
    "text": "2.5 Pair of quantitative variables\nThe most common way to show the relationship between two quantitative variables are scatter plots. On one axis one variable is presented, on the other another one. Sometimes a trend line can be drawn to make the relationship more visible. An example of such a chart is shown in Figure 2.6.\nScatter plots have a great many variations. One common modification is axis transformations. For skewed variables, especially those centered around zero, square root transformation or logarithm transformation are useful techniques. The left panel of the chart below uses a square root transformation for both axes, so that the points are more evenly distributed throughout the chart, rather than just clustered around zero.\nAnother popular modification of scatter plots are Bland-Altman plots, also called Tukey mean-difference plots (the former name is often used in biochemistry and medicine). On one axis the average of two variables is drawn, and on the other axis the difference between the variables is presented. This juxtaposition of variables makes it possible to assess their correspondence. An example of such a graph is shown in the right panel of the Figure 2.6. Overall, it can be seen that it is fats that account for a larger share than proteins in the composition of the products analyzed, the exception being fish products.\n\n\n\n\n\n\n\nFigure 2.6: Scatter plot showing the relationship between protein and fat content per 100 g of product. In the left panel, the axes have been transformed with an square root transformation to thin out points clustered near zero. The colors help to see clusters of products from the same group."
  },
  {
    "objectID": "recipes.html#multiple-variables",
    "href": "recipes.html#multiple-variables",
    "title": "2  Tried and Tested",
    "section": "2.6 Multiple variables",
    "text": "2.6 Multiple variables\nOnce we know the relationships for a pair of variables, the next step is to explore a larger group of variables.\nThere are many statistical techniques to better understand the joint relationships between variables. For quantitative data, a frequently used technique is principal component analysis – PCA. It allows both observations and variables to be presented in a two-dimensional space in such a way as to best preserve information about which variables are correlated with each other, and at the same time which observations have high values of each variable. Analyzing the result of the PCA analysis shown in the Figure 2.7, one might suspect that starch and sugars are positively correlated, while water is positively correlated with the amount of alcohol and negatively correlated with other variables, especially fiber. The vertical axis distinguishes products rich in protein and fat from those rich in sugars and starches.\n\n\n\n\n\n\nFigure 2.7: The first panel shows the PCA analysis for the food product composition data, while the second panel shows the correlation matrix between the contributions to composition of each component. The next two panels show the values of multiple variables for selected observations – first with a line graph and then with a heatmap\n\n\n\nA common summary technique for a set of variables is to use correlation plots, such as those presented by correlation matrix heat maps, as in the figure above. They allow us to see which variables are most strongly correlated and how many such correlated clusters we have.\nIf we want to present individual observations, taking into account multiple variables for them, then heat map plots or parallel coordinates plots can be useful. Both of these types of plots are shown in the last two panels of the Figure 2.7."
  },
  {
    "objectID": "recipes.html#tasks",
    "href": "recipes.html#tasks",
    "title": "2  Tried and Tested",
    "section": "2.7 Tasks",
    "text": "2.7 Tasks\nLet’s look at a few news portals where clear and consistent data communication is important. \n\nA place where huge amounts of data are consumed instantaneously are stock exchanges. Take a look at stock quotes, currency exchange rates, indices, for example at https://www.barchart.com/stocks or https://finance.yahoo.com. What type of data is presented here? What mechanisms have been used to facilitate rapid analysis of hundreds of indices simultaneously? How was it handled to show sales volume and price simultaneously?\nPISA is a periodic testic program of school skills among 15-year-olds from dozens of countries around the world. Every three years, the skills of hundreds of thousands of students are analyzed and matched against countless indicators. PISA reports are strewn with data and plots. Take a look at one of the publications on this data, available at https://www.oecd.org/pisa/. What two types of plots are most commonly used in it. What mechanisms have been used to make the data in these plots easier to read?\nProbably the largest, and certainly the most diverse, database in Europe is that of Eurostat, the statistical office that collects a wide variety of data on the countries of the European Union and beyond. Take a look at a selected publication from https://ec.europa.eu/eurostat and think about what kind of plots are most often used there. Why? What mechanisms are used to make the data on these plots easier to read?"
  },
  {
    "objectID": "cherries.html#a-plot-as-a-way-of-fighting-an-epidemic",
    "href": "cherries.html#a-plot-as-a-way-of-fighting-an-epidemic",
    "title": "3  Cherries",
    "section": "3.1 A plot as a way of fighting an epidemic",
    "text": "3.1 A plot as a way of fighting an epidemic\nGraphs can be the foundations of entirely new scientific and social discoveries. An interesting example of statistical graphics accompanying a scientific revolution is the chart developed by physician Dr. John Snow (1813–1858) concerning the cholera epidemic in London’s Soho in the year 1854. The significant importance of this work is evidenced, among other things, by the fact that thanks to the results of his work on this epidemic, John Snow is considered a forerunner of epidemiology.\n\nLet’s outline the context. The year is 1854. The population of London’s Soho is growing rapidly. There is no sewage system. The waste is stored in septic tanks, located in basements. Unfortunately, the septic tanks are not large enough for the needs of the rapidly growing population and overflow too quickly. London authorities are ordering them to be emptied more frequently by pouring the contents into the river Thames. A cholera epidemic breaks out in London, killing more than 120 people in the first three days, with a total of more than 600 victims. The plague has caused such a panic that a third of Soho residents have fled the city in fear for their lives.\n\nIn those days, it was believed that cholera was spread by “murine air”. Let’s remind ourselves that the disease-causing bacteria was not discovered by Louis Pasteur until 7 years later, so both during this epidemic and earlier ones, people really had no idea what they were dealing with. Our protagonist, John Snow, while looking for the cause of the epidemic, talked to residents of the disease-ridden neighborhood. He discovered that all the cases of illness and death were somehow related to the Broad Street water pump. The deaths were mostly of people living in the neighborhood, or children attending school nearby, or people living farther away but drawing water from this pump. We can assume that he noted this by drawing dots on a map of the neighborhood to symbolize a person getting sick where they live/work/go to school.\n\nJohn Snow could not explain what exactly was causing the disease, but the evidence he gathered was enough to convince London authorities to close the designated water intake. By Snow’s own admission, the epidemic was in its final stages by then, and it is impossible to attribute the end of the epidemic solely to this decision. However, it certainly reduced the number of deaths and contributed to a better understanding of the causes of the epidemic. It was later determined that the germ-spreading water pump was located very close to one of the septic tanks.\n\n\n\n\n\nFigure 3.1: Left: A chart that has gone down in history as evidence of the source of the cholera epidemic in London’s Soho. The map was designed by John Snow, but was drawn and printed by lithographer John Churchill. Right: A reconstruction of Snow’s chart. The red dots represent the locations of cholera victims, the blue triangles represent the location of water intakes\n\n\n\n\nThe map shown in Figure 3.1 is a beautiful example of how data visualization makes it possible to vividly depict the relationship between various factors, in this case deaths and water intake. In Snow’s case, one can speculate that it was the process of creating the first version of the map that helped him discover the source of the epidemic (Snow 1849).\n\n\nSnow, John. 1849. “On the Mode of Communication of Cholera.” Edinburgh Medical Journal 1: 668–70."
  },
  {
    "objectID": "cherries.html#a-plot-as-a-universal-tool-of-persuasion",
    "href": "cherries.html#a-plot-as-a-universal-tool-of-persuasion",
    "title": "3  Cherries",
    "section": "3.2 A plot as a universal tool of persuasion",
    "text": "3.2 A plot as a universal tool of persuasion\nAs we have seen with the example of the cholera epidemic, statistical graphics are very useful in making scientific discoveries and studying social phenomena. As we will see in a moment, it can also be used as a tool to influence the viewer’s opinion and, consequently, his further decisions. The best-known example of statistical graphics used to elicit a specific reaction, or even used as a means of strong persuasion, were the charts of English nurse and also statistician Florence Nightingale (1820–1910).\n\nMiss Nightingale’s personality plays no small role in this story, so let’s start with a brief introduction to her. A woman who came from a good home (she was an aristocrat) terrified her entire family when she declared that she wanted to become a nurse. In those days, it was absolutely not an occupation for women with high or even middle social status. Nightingale, however, was not one to give up her plans easily. Not only did she become a supervisor of nurses, but at the age of 33 she began organizing hospital care during the Crimean War.\n\nShe worked without sufficient medical supplies or food resources. She did what she could to help wounded soldiers. She was known to make systematic rounds of the hospital corridors carrying a lamp, which is why the term the lady with the lamp stuck to her. Was she doing this so that soldiers would not feel lonely and abandoned at night, alone with pain and suffering? Her attitude turned into a symbol. A hundred years later, a film was made under the title The Lady with the Lamp, and references to her appear in the poetry of Henry Longfellow and other poets. She became known as a very determined person. At the same time, her approach to her work is to be admired, as she was not just concerned with ad hoc relief, but was interested in the overall problem and was keen to create good systemic solutions so that others could also benefit from her experience.\n\nDuring her period of service in the Crimean peninsula, Nightingale discovered that most soldiers died from poor hospital care: infections, malnutrition and other causes that could be remedied by organizing better care. She estimated that of the 18,000 deaths, about 16,000 were due to infections, meaning poor hygiene and debilitation of the sick due to lack of food and inadequate equipment in field hospitals. At the same time, this discovery carried a clear message about what to do to significantly reduce the number of casualties - hospital care had to be better organized. This is obvious today, but at the time it was a revolutionary discovery.\n\nTo make her point, Nightingale developed the polar diagram (also known as the Nightingale rose diagram), shown in Figure 3.2, referred to as the coxcomb diagram by the author herself.\n\n\n\n\n\nFigure 3.2: The graph shows the number of deaths caused by treatable diseases (blue), war wounds (red) and other causes, such as frostbite (black). The number of deaths is proportional to the radius of the segment. Source: Diagram of the causes of mortality in the army in the East, published in Notes on Matters Affecting the Health, Efficiency, and Hospital Administration of the British Army, sent to the British Queen in 1858. Public domain.\n\n\n\n\nFrom the chart developed by Nightingale, it is easy to read how many deaths were due to treatable diseases, i.e. hospital infections, the effects of malnutrition or poor hospital care. These cases correspond to the color blue. The spacing of the bars makes this color dominate the graph. The numbers of deaths are proportional to the radii of the corresponding segments, but what is more striking is their area – and this is proportional to the square of the radius. This is obviously a manipulation of the way the data is presented, so that the proportion of curable diseases appears even higher than in reality.\n\nThis chart not only showed what was wrong with the hospital care system on the battlefield, but was coupled with the author’s clear suggestion that improving hospital care would lead to a significant reduction in war casualties. With its simple form, emphatically stating the facts, it was sufficiently comprehensible to everyone. The chart fulfilled its role very well, it was educational and informative (it presented new facts), and in addition, it was opinionated (thanks to the weight of the information presented), so it led to changes along Nightingale’s lines. Conditions in hospital care improved significantly. In this case, it can be said without any abuse that it was the statistical graphics, the clear and purposeful presentation of data, that led to the saving of thousands of lives and to significant changes in the system of care for the sick.\n\nIn 1907, Florence Nightingale became the first woman in history to receive the British Order of Merit. Since 1920, the highest international nursing decoration has been the Florence Nightingale Medal. By 2014, one hundred and two Polish nurses had received this decoration."
  },
  {
    "objectID": "cherries.html#a-plot-as-a-summary-of-military-campaigns",
    "href": "cherries.html#a-plot-as-a-summary-of-military-campaigns",
    "title": "3  Cherries",
    "section": "3.3 A plot as a summary of military campaigns",
    "text": "3.3 A plot as a summary of military campaigns\n%William Playfair’s charts are beautiful examples of visualizing data on the economy of a country. John Snow’s chart shows how the common denominator of dozens of deaths can be found through data visualization. Florence Nightingale’s charts demonstrate the persuasive power of a well-designed graphic. Now let’s take a look at a graph about which Edward Tufte (whom we will still meet on one of the next stops of the journey through the history of visualization) wrote: “perhaps the best statistical graphic ever created”.\n\n\nLet’s start by introducing the author. Charles Minard (1781–1870) was a French civil engineer, and a pioneer when it came to the applications of graphics in engineering and statistics. In 1869 he published a map depicting the history of Napoleon’s invasion of Russia in 1812–13. The beauty of this graphic comes from the simplicity and elegance of presenting complex and multidimensional data.\n\nDozens of battles and skirmishes, the movements of huge masses of troops, the results of clashes with enemy armies – all this can be read from a single map. The number of men in the armies at each stage of the invasion is shown by the thickness of the sections connecting the various important points of the campaign. Near Kaunas the Napoleonic army consisted of 420,000 soldiers. On the way to Moscow, two smaller divisions separated from the main army, and further east there were a number of battles, as a result of which the the army was dwindling, as shown by the narrowing width of the brown ribbon. Only about 100,000 soldiers reached Moscow. However, these were soldiers without sufficient supplies, as the retreating Russian army left no food supplies.\n\n\n\n\n\nFigure 3.3: The map shows the fate of Napoleon’s army at various stages of the invasion of Russia. Source: Charles Minard Figurative Map of the successive losses in men of the French Army in the Russian campaign 1812–1813, 1869.\n\n\n\n\nThe retreat began on October 18th due to food shortages and the approaching winter. In the graph, the retreat is marked by a black band, which is simultaneously accompanied by a presentation of the falling temperature (at the bottom of the graphic). The soldiers did not manage to escape the winter and cold. During the retreat the temperature dropped to \\(-30\\) degrees. Temperature, lack of food, skirmishes with the enemy caused the army to shrink down to 30,000 soldiers on the way back to Kaunas. This was a small fraction of the initial army.\n\nWhen marking the location of the troops, not only the geographic location was taken into account, but also the dates when the army reached a given position. This makes it possible to track in time the movement of the imperial army, as well as the course of battles (a narrowing ribbon indicates fewer and fewer soldiers after successive bloody skirmishes). The marked falling temperature during the retreat (the invasion took place during reportedly one of the harshest winters in history) makes it easier to understand what other obstacles the soldiers, many of whom came from southern Europe, had to face.\n\nMinard’s map challenges the claim that any good visualization must be simple and immediately readable. It exemplifies that a graphic rich in a variety of information need not at all be a dashboard composed of many simple diagrams.\n\nMinard’s work is not at all simple graphics. It contains many details that can be gradually uncovered, some of which are noticed only after some time. All these details add up to one rich picture of the Napoleonic campaign. Is this what an ideal statistical graphic is? Is it about presenting all the complexity of the phenomenon being described, everything that is important about it, in the form of one multi-layered picture? Certainly, this is a great example of a clear, aesthetically pleasing and informative visualization."
  },
  {
    "objectID": "cherries.html#a-plot-will-demonstrate-it-better",
    "href": "cherries.html#a-plot-will-demonstrate-it-better",
    "title": "3  Cherries",
    "section": "3.4 A plot will demonstrate it better",
    "text": "3.4 A plot will demonstrate it better\nOne of the best-known statistical charts is Anscombe’s quartet, shown below. Frank Anscombe  made history in statistical graphics when, in 1973, he constructed and presented four data sets with very interesting properties. Each dataset consists of two variables: x and y. In each dataset, the mean value of the variable x is 9. The variance of this variable in each dataset is 11. The mean of the variable shown on the vertical axis in each dataset is 7.5, and their variances are equal to 4.12. For each of these four datasets, the correlations of the variables on both axes are 0.816, and from the point of view of linear relationships, all these data are best described by the same linear regression model \\(y=3+x/2\\).Frank Anscombe is the brother-in-law of John Tukey, one of the most famous maverick statisticians of the time.\n\nOne might get the impression that these are very similar datasets, since they have such a very similar description. But only by drawing the data a very different story hidden in each dataset is revealed.\n\n\n\n\nFigure 3.4: Anscombe’s quartet reconstructed using the ggplot2 package.\n\n\n\nFor more than 50 years, researchers have been swayed by correlations that are easily represented by a simple formula, such as using linear regression. Anscombe prepared four datasets so that the basic numerical statistics are identical for them (Anscombe 1973). In each of these four datasets, we have the same means, variances, correlation coefficients, linear regression coefficients, and significance test values for coefficients in linear regression models. From a linear regression point of view, these four data sets are indistinguishable, and in each of these four cases we have the same relationship between a pair of variables.\n\n\nAnscombe, Frank. 1973. “Graphs in Statistical Analysis.” The American Statistician 27: 17–21.\nHowever, a simple graphical representation of these four data sets illustrates the obvious differences between them. This is a great example of the value of data visualization, which can sometimes tell you more about the data than even a sophisticated statistical model."
  },
  {
    "objectID": "cherries.html#a-plot-as-a-tool-for-teaching",
    "href": "cherries.html#a-plot-as-a-tool-for-teaching",
    "title": "3  Cherries",
    "section": "3.5 A plot as a tool for teaching",
    "text": "3.5 A plot as a tool for teaching\nIn addition to literacy and numeracy, education related to statistical inference is needed. This will enable society to better understand the world around us and the changes that are taking place in this world.\n\n\n\n\n\n\n\nFigure 3.5: World empires in different periods of history. Source: Modern Man in the Making, Otto Neurath.\n\n\nHowever, as it turns out, this is not such a new trend at all. Over a century ago, sociologist Otto Neurath argued that statistical graphics should play an educational role for society. To make this possible, it must be understandable and interesting, easy to remember and precise. To this end, Neurath in the 1930s developed the ISOTYPE language, designed to make graphs easy to understand, so that “visual education” of the public is possible based on them.\n\n\n\n\n\nFigure 3.6: Fraction of underweight or overweight people in different age groups. Data are presented according to ISOTYPE language rules. The use of bold icons in red to indicate obese people may visually magnify the share of this group. Source: Magda Malczynska-Umeda for the SmarterPoland Foundation.\n\n\n\n\nThe ISOTYPE language is a set of symbols and rules, guidelines on how to graphically present information in a way that can be understood by a wide audience. It contains lists of precisely designed signs/pictograms with universal meanings and rules for clear and accurate use of these pictograms to present information. One of the most distinctive rules is the principle of using repetition of a sign to represent magnitude. When comparing two values, one of which is 50% greater than the other, a bar chart would use two bars, one of which would be 50% longer than the other. In certain situations, using the number of repetitions of a pictogram instead of length allows for a clearer and more interesting presentation of a particular value.\n\nThis “visual language” was constructed to facilitate the understanding of numerical data describing the modern world. One of the major works created using this language is Modern man in the making (1939) (Neurath 1940), by Otto Neurath. This book presents a collection of interesting statistics about society, showing what the world was like at the time. Today, Otto Neurath’s works are available in the public domain. The drawing by Figure 3.5 is from the latter and shows the size of various empires throughout history.\n\n\nNeurath, Otto. 1940. “Modern Man in the Making.” Philosophy of Science 7 (1): 133–34. https://isotyperevisited.org/.\nFor more on ISOTYPE language, see the article Młodzi XXL, Eurostat a problem nadwagi i otyłości by Magda Malczynska-Umeda (only available in Polish)."
  },
  {
    "objectID": "cherries.html#tasks",
    "href": "cherries.html#tasks",
    "title": "3  Cherries",
    "section": "3.6 Tasks",
    "text": "3.6 Tasks\nWould you like to learn more epic graphs creating data visualization stories? You just need to do the following tasks.\n\nOne of the founding fathers of graphical data visualization was William Playfair. He invented many ingenious ways of presenting data. Playfair’s work containing these graphs was a real bestseller in his time. Check out the list of various graphs presented on his page at Wikipedia. Which of these charts would you consider the most interesting/breakthrough?\nOne of the most interesting charts of all time is the box plot proposed by John Tukey. In the article 40 years of boxplots there is an interesting discussion of various modifications of this chart. Which one do you think is the most informative?\nA very original and ingenious way of presenting data is the stem-and-leaf diagram. You can read more about it on the relevant page in Wikipedia. Can you tell where it is most often used today?"
  },
  {
    "objectID": "holes.html#holes-in-color-perception",
    "href": "holes.html#holes-in-color-perception",
    "title": "4  Holes…",
    "section": "4.1 Holes in color perception",
    "text": "4.1 Holes in color perception\nColor is a color, it’s clear as day. Is that so? Let’s see what two great researchers thought about colors – Isaac Newton and Johann Wolfgang von Goethe. Already in elementary school we are introduced to Newton’s perspective, we learn about the physical properties of light, that white light is a mixture of wavelengths of different lengths that can be split by a prism, as Isaac Newton demonstrated in 1672. Such thinking about colors is focused on the physical properties of a mixture of different wavelengths.\n\nJohann Wolfgang von Goethe wrote about colors in a completely different way. He noticed some discrepancies between Newton’s physical description of light and human perception of colors. He observed that color appears not only where there is light, but also where there is no light. If one looks at a strong source of light, such as the sun or white snow on a sunny day, and then enters a completely shaded room, one will observe the impression of swirling red circles. Goethe’s observation was that shaded places seem to have colors especially when adjacent to, for example, strongly reflective snow. Although a shadow is, after all, according to Newton’s theory, a place where there is no light, so there are no colors.\n\nThus, color impressions depend on both what we have seen before and what is still in our visual field. Goethe published his results in 1810 in the work Theory of Colors (Goethe 1810. ), which he reportedly valued more than his poetic work. In his theory, Goethe attached great importance to color impressions, their perception depending on various factors, including the emotions of the observer. Goethe considered his theory to be opposed to Newton’s theory.\n\n\nGoethe, Johann Wolfgang von. 1810. Zur Farbenlehre / Theory of Colours. J.G. Cotta Tubingen.\n\n\n\n\nFigure 4.1: Adelson’s checker-shadow illusion. Are areas labeled A and B the same or different colors? Made by Adrian Pingston based on the work of Edward Adelson.\n\n\n\nDear Reader, if at this point you think that all this subjective color theory is a rubbish, it means that you are ready for an experiment that will show you that the same colors can be read differently. In Figure 4.1 in the margin, you’ll find an illustration first published by Edward Adelson in 1995. Look at the top panel. Do the A and B squares on the chessboard have different colors? Without a shadow of a doubt, we will probably conclude that field A is darker than field B. However, if we were to remove the context from this drawing, for example, by covering everything but these fields with a finger, or connect these squares with a strip, then we would notice that they are actually the same color.\n\n\nDepending on the context, we can make the gray color be perceived as yellow or blue, as exemplified by the picture of the dress in Figure 4.2. A few years ago, there was a war on the Internet about whether it was a black and blue dress or a white and gold dress.to determine whether it was a black and blue dress or a white and gold dress. From the Tumblr website to highly respected scientific journals, the illusion was debated. It turns out that different people read the colors from this photo differently depending on what they assume about the source and color of the lighting on this dress.\n\n\n\n\n\n\nFigure 4.2: Caitlin McNeill’s 2015 photo\n\n\nIf you want to see more color illusions, it’s worth visiting the Copernicus Science Center in Warsaw, which has an entire section dedicated to colors. For example, Figure 4.3 shows the same three boards with beetles illuminated in different colors. The relative colors of the beetles are perceived differently each time. Depending on the lighting, the color of the objects can vary greatly.\nA similar problem applies to plots printed in newspapers or company reports, for example, when we view them in different light conditions, such as daylight or the light of a night lamp. The same plot will look even different on a laptop screen, which has high brightness and high contrast.\n\n\n\n\n\n\nFigure 4.3: A collage of photos from an exhibition at the Copernicus Science Center in Warsaw. The same board with three beetles seen in different lighting conditions\n\n\nAs if color problems weren’t enough, in addition, about 5% of the population has various types of color vision deficiencies, often called, “color blindness”. \nThere are many causes of color vision deficiencies (CVDs), ranging from genetic, to those related to acquired trauma, adverse drug effects, disease or age. Total inability to distinguish colors is very rare, usually color vision impairment concerns the ability to distinguish specific colors. Mutations in genes on the X chromosome cause abnormalities in the development or complete absence of cones of a specific type, rarely of two types. Since women have two X chromosomes and men only one, this type of disorder is much more common in men. Approximately 5–10% of men have some sort of genetic problem with color perception; for women, these problems occur in less than 1% of the population.Cones (cone cells) are light-sensitive receptors in the retina that contain specific receptor proteins that absorb light in different wavelength ranges. The cones enable color vision\n\n\n\n\n\nThe most common color vision deficiency is deuteranomaly (deutan CVD caused by malfunctioning M cones in the retina) resulting in difficulty distinguishing between red and green colors.\n\n\n\n\n\nFigure 4.4: Heat map for food product composition data. The left panel is a map with colors spanned between green and red. The right panel illustrates how this map is seen by people with deutan CVD – color blindness, which affects about 5% of people\n\n\n\n\n\nFigure 4.5: The left panel is a heat map with colors spanned between red and blue. The right panel shows how this map is seen by people with deutan CVD\n\n\n\nIf colors play a crucial role in the data visualization we are developing, and we want to make sure that at least people with typical color vision dysfunctions will be able to read the information in the plot, we can use a color blindness simulator. One such simulator is Color Oracle for the Color Impaired, which allows us to change the image displayed on the computer screen to what people with the most common deficiencies see."
  },
  {
    "objectID": "holes.html#how-to-get-along-with-colors",
    "href": "holes.html#how-to-get-along-with-colors",
    "title": "4  Holes…",
    "section": "4.2 How to get along with colors?",
    "text": "4.2 How to get along with colors?\nColor is by far the strongest spice you can add to a plot. A well-chosen one will highlight what is important, draw attention to key areas. A poorly chosen one or overdone one will turn the entire chart into a noisy gibberish.\n\nThe color on the plot can have a distinguishing function (a red dot against a background of gray dots) or encode the values of a certain variable. To encode the values of a variable, three color scales are used (see Figure 4.6). These scales are: * sequential scale for quantitative variables – a scale in which the intensity or brightness of a color represents the spectrum of values of a variable. The smallest values are most often coded by bright colors, and larger values – by intense colors. An example would be the caloric content of a product; * divergent scale for quantitative variables with a neutral element – a scale in which we want to show the range of some variable between two extreme values, usually with a neutral value marked. This scale is great for distinguishing which points are below and which are above the reference level. An example would be temperature with a neutral element equal to 0; * qualitative scale for qualitative variables – a scale in which we want to select \\(k\\) colors as distinguishable from each other as possible. Such scales in charts are often used to code groups of observations, and we want each group to be independently observable and not confused with other groups. An example would be coding a group of food products.\n\n\n\n\n\n\n\n\nFigure 4.6: Three sets of seven colors selected from a set of ColorBrewer color palettes. The first will find application in the presentation of a variable with ordered values (e.g., on a scale of 100 to 200), the second in the presentation of ordered values with a neutral element (e.g., -10 to 10), the third in the presentation of a variable with unordered values\n\n\nWhere do these scales come from? To answer this question, we need to take a closer look at the anatomy of color. Let’s start with a numerical description of color. If we often work with graphics displayed on computer screens, the most natural representation of color for us will be the RGB (from red, green, blue) scale. Color is described by the intensity of the emitters of three different wavelengths corresponding to red, green and blue. But if you often work with digital printing, it’s much more common to communicate color on the CMYK (from cyan, magenta, yellow, black) scale, which describes the four colors of ink used in the printing process. On the screen, colors are the result of emitting color light; in printing, colors are the result of different absorption of white light by the printed sheet. For offset printing, we use the Pantone scale much more often.\n\n\nIt turns out that the most natural scale for thinking about color when designing statistical graphics is the HCL (hue, chroma, luminance) scale. It allows us to decompose color into three components that we can independently analyze in plots (Zeileis, Hornik, and Murrell 2009). Figure 4.7 shows the differences between each of these three components. The first bar at a fixed brightness and intensity differs only in color, the second in brightness, and the third in intensity.\n\n\n\nZeileis, Achim, Kurt Hornik, and Paul Murrell. 2009. “Escaping RGBland: Selecting Colors for Statistical Graphics.” Computational Statistics and Data Analysis 53 (9): 3259–70.\n\n\n\n\nFigure 4.7: Three sets of seven colors differing by only one coordinate in HCL space: hue, brightness or intensity. We see that the uniform distribution of coordinates translates into uniform differences in color perception\n\n\n\nHaving such a description of colors, we can construct color scales with very useful properties. To construct a scale for a qualitative variable, we set the same values of C and L components, and in the H component we look for a set of \\(k\\) equally distant points. To construct a scale for a quantitative variable, we choose the values of H and C components, and then construct a scale by changing the values of the L component.\n\nIn this way, the ColorBrewer (Brewer 1994) scales were created. They were developed by Professor Cynthia Brewer, who is professionally involved in the creation of cartograms, including the selection of colors for these plots. At http://colorbrewer2.org/ you can find various suggestions for these scales, depending on how many colors you need and the role of the color scale (Brewer 2022).\n\n\n\nBrewer, Cynthia. 1994. “Color Use for Mapping and Visualization.” Visualization in Modern Cartography, 123–47.\n\n———. 2022. ColorBrewer: Color Advice for Maps. http://colorbrewer2.org/.\nIt is also worth noting that there are no very intense colors in these color schemes. Pastels and other soft colors predominate. This is due to the fact that large areas of very intense colors with a high contrast are very tiring to the eye in the long run. The last effect we want to achieve with our data visualization is the effect of quick fatigue of the eye (and consequently of the recipient himself).\n\nIf you want to live well with colors, then remember:\n\nAvoid unnecessary use of colors. If the color has no function in the chart, it will only get in the way.\nAvoid flashy colors. Reserve intense colors for really special occasions, don’t pester with them for no reason.\nIf you are already using colors, consider what role they serve. Are they a distinguishing feature of one unique point that the reader is supposed to pay attention to? Do they play a role of grouping similar objects, and in different plots this grouping is carried out in a consistent manner?\nLook critically at the colors chosen. Is the scale used (qualitative, sequential, divergent) consistent with the function in the chart?"
  },
  {
    "objectID": "holes.html#holes-in-shape-perception",
    "href": "holes.html#holes-in-shape-perception",
    "title": "4  Holes…",
    "section": "4.3 Holes in shape perception",
    "text": "4.3 Holes in shape perception\nWould you believe that there is a large area in our visual field where we can’t really see anything? This is because the retina does not cover the entire back wall of the eyeball, but in a certain area in the retina, there is a hole through which the optic nerves exit towards the brain.\nWhy can’t we see that we can’t see? The brain helps us fill in the picture, and it does it so efficiently that most often we don’t notice any lack. But a simple experiment shows how this old cheater works. Check it out for yourself.\nTake a look at the drawing below. Close your left eye, and with your right eye look straight at the dot on the left. While still looking at the black dot, slowly move the piece of paper closer towards your eye. At a certain distance (ca. 15 centimeters) you will notice that the black cross will disappear, although it should still be in your visual field. However, you won’t be able to see it, because its image will be projected onto a blind spot, where there are no receptors. If you move the card further, the cross will appear again.\n\n\n\n\n\n\n\n\nFigure 4.8: A simple experiment that allows to observe the effects of the blind spot. Looking with the right eye at the left dot, find such a distance from the page that the black cross disappears from the visual field\n\n\n\nAmazing, right? Even more amazing is that the image projected on the blind spot is not simply cut out. After all, it’s not like we see a white hole in the visual field all the time. In fact, the image is completed by the brain based on its surroundings!\nHowever, this is not the end of the tricks of our perception. It likes to turn up the contrast even in situations where it is completely unnecessary. Figure 4.9 in the margin shows Titchener illusion. Which central circle is larger, the one at the top or the one at the bottom?\nOf course, it turns out that both inner circles are equally large.\n\n\n\n\n\n\n\n\nFigure 4.9: The Titchener illusion, named after its discoverer, who was Edward Bradford Titchener (1867–1927). Circles placed in the center have the same sizes, but are perceived as circles of different sizes depending on their surroundings. Source: developed based on Wikipedia.\n\n\nThe situation is similar with pseudoperspective. When we see photographs, we expect that a picture of a three-dimensional object may represent perspective. But even in the case of very abstract drawings, in which there are elements that only suggest perspective, our mind will modify the evaluation of size, assuming the presence of perspective even in situations where by no means can there be true perspective. This obviously interferes with size assessment.\n\n\n\n\nFigure 4.10: The two bold line segments are the same length. The diagonal lines, however, suggest the perspective due to which the sections are perceived as being of different lengths. Source: public domain.\n\n\nThe problem in assessing size is not caused solely by context or a non-existent perspective. Some characteristics simply cannot be judged well by our brains. A great example is angles. We are able to judge with a high degree of accuracy whether an angle is close to a right angle, but we have great difficulty judging the size of acute and obtuse angles. Our brain tends to overestimate the size of acute angles and underestimate obtuse angles.\n\n\n\n\n\n\nFigure 4.11: The Poggendorff illusion related to the difficulty of judging angle sizes accurately. The line visible on the left is an extension of one of the lines seen on the right. Which one? Source: developed based on Wikipedia.\n\n\nAn interesting illustration of this tendency is the illusion described by Johann Poggendorff (1796–1877). In Figure 4.11, the line visible on the left side of the rectangle is an extension of one of the lines visible on the right side. Which one?\nIn this paradox, judging the angle between the left line and the gray rectangle, our brain tends to overestimate this angle. Because of this, we are under the impression that the extension of the left line is the upper right line. You can easily check, with a ruler or other straight-edged object, that in fact it is the lower right line that is the extension of the left one."
  },
  {
    "objectID": "holes.html#how-to-get-along-with-shapes",
    "href": "holes.html#how-to-get-along-with-shapes",
    "title": "4  Holes…",
    "section": "4.4 How to get along with shapes?",
    "text": "4.4 How to get along with shapes?\nMany researchers have been interested in the problem of selecting visual characteristics on a plot that can safely encode quantitative values. The first of the works devoted to the perception of the size of shapes used in graphs was The Visual Decoding of Quantitative Information on Statistical Graphs (Cleveland and McGill 1987). Its authors, after conducting a set of experiments, prepared a hierarchy of characteristics taking into account the precision of reading values.\n\nCleveland, William, and Robert McGill. 1987. “Graphical Perception: The Visual Decoding of Quantitative Information on Statistical Graphs.” of the Royal Statistical Society Series A 150: 192–229.\nThis hierarchy is shown in Figure 4.12, and can be summarized as the following rules. (1) The most readable are the positions of objects distributed along a common scale (for example, a dot plot). (2) The lengths of sections distributed along a common scale are well readable. (3) The positions of objects along the same but not a common scale (for example, different graphs placed on a cartogram) are quite readable. (4) Angles and slopes (used, for example, in assessing growth rates in line graphs) are not read very accurately. (5) Values coded as areas or volumes of irregular solids are the most difficult to read correctly.\n\n\n\n\n\nFigure 4.12: Average perceptual errors in distinguishing the size of different objects. Source: developed based on the results of Cleveland and McGill.\n\n\nIs this actually the case? Let’s check! Figure 4.13 shows the same five numbers in two ways – as slices of a circle and as points arranged along a single axis. The ease of indicating which value is the largest and which is the smallest is totally different. For a pie chart, it is difficult to unambiguously determine the order of the A-E values; in the case of a dot plot, we have no doubt.\nIn the case of Figure 4.14, the areas of the Polish voivodeships (provinces) are shown with irregular curves and with a bar plot. Where is it easier to read which voivodeship and by how much is larger than the other?\n\n\n\n\n\n\nFigure 4.13: Both plots show the same values. Source: developed based on the example given by Cleveland and McGill.\n\n\n\n\n\nFigure 4.14: Which voivodeship is larger and by how much? Differences in size are much easier to see when sizes are presented as line segment lengths rather than unequal areas. Lublin Voivodeship has an area of 25,133 km\\({}^2\\), while Warmian-Masurian Voivodeship has an area of 24,173 km\\({}^2\\). Source: own study.\n\n\nThe conclusion of this research is that if we want to show relative sizes, it is best to use characteristics such as length and stay away from areas, volumes and color saturation. Unfortunately, this research is often disregarded and so we encounter colors and areas together used to represent quantities."
  },
  {
    "objectID": "holes.html#holes-in-composition-perception",
    "href": "holes.html#holes-in-composition-perception",
    "title": "4  Holes…",
    "section": "4.5 Holes in composition perception",
    "text": "4.5 Holes in composition perception\nDear Reader, in the previous sections, we have shown examples of how easy it is to make a mistake in reading colors or shapes on plots. But it doesn’t stop there. In certain situations, we may not notice an entire section of a plot, especially if our attention is focused elsewhere.\nWhen analyzing any plot, our eyes sweep over the whole picture, but analyze only selected parts in detail. It does not see other parts at all! If the attention of the plot viewer is not directed to an important place, it may never reach it.\n\n\n\nAn interesting illustration of the phenomenon of selective attention is the experiment called “invisible gorilla” (Simons and Chabris 1999). People who are unfamiliar with this experiment, but like to experiment, should stop reading at this point and search on youtube.com for a video titled Selective attention test. Follow the lecturer’s instructions, and after watching the video, return to reading the rest of this subsection.\n\n\n\nSimons, Daniel, and Christopher Chabris. 1999. “Gorillas in our midst: Sustained inattentional blindness for dynamic events.” Perception 28: 1059–74.\n\n\n\nFigure 4.15: Photo from a video illustrating the “invisible gorilla” experiment. In the film, a gorilla slowly walks through the middle of the room, but due to the cognitive load of counting ball passes, some observers do not notice it. Looking at this picture, it’s hard to believe. Source: correspondence with Daniel Simons.\n\n\nFor those who do not have access to the Internet, a brief summary. The experiment is as follows. Viewers of the video were asked to count the number of passes of the ball played by the group of people in the video – only passes between people in white shirts were to be counted. Concentrating all of their attention on tracking the ball, most of those watching the video do not notice the person dressed as a gorilla crossing the center of the room, beating his chest in the middle. Knowing what to expect, we will notice this gorilla. We will also probably have trouble believing that it could have been missed. The gorilla is big and stands out a lot to the players. In this case, it’s a good idea to find someone who hasn’t heard of selective attention and run the gorilla experiment on them.\n\n\nOn the Internet, you can find more examples of experiments illustrating “selective attention” or “inattentional blindness”. All of them show that animation is not suitable for conveying complex information. If we necessarily want to build an animated plot, we must take care that the observer knows which element to look at."
  },
  {
    "objectID": "holes.html#how-to-get-along-with-composition-perception",
    "href": "holes.html#how-to-get-along-with-composition-perception",
    "title": "4  Holes…",
    "section": "4.6 How to get along with composition perception?",
    "text": "4.6 How to get along with composition perception?\nThe examples presented here show how important it is for the plot reader’s eyes to visit all the important places and for them to be clear. What places might be involved? It turns out that critical to the ability to read a plot are such elements as the title, subtitle, axis descriptions and legend.\nIf you have more plots in your report, make sure they are consistent and that the above elements are readable. Cursory descriptions of axes are your enemies. You probably know what’s on the axes. But will the reader know it?\nThe title is crucial, it anchors our attention and tells us what to look for on the chart. If the color, shape or size of the chart elements matter, you need to describe them in the legend. Otherwise it can be very difficult to guess them."
  },
  {
    "objectID": "holes.html#tasks",
    "href": "holes.html#tasks",
    "title": "4  Holes…",
    "section": "4.7 Tasks",
    "text": "4.7 Tasks\nFind an article, book or news portal that provides data-driven information. For example, you can use BiQdata.co.uk, BeautifulNews or The New York Times. Based on this, perform the following tasks.\n\nColor. If there are different colors on the plot, do they serve any informational function? Without colors, would the plot lose something? Do you have any idea how to choose the colors differently on this plot?\nGeometry. What shapes encode information on this plot? Is it length, position, size or angle? Do they do it well = legibly? What would this plot look like if the same data were presented using different geometry?\nComposition. What do you think of the title, axis descriptions or legend descriptions? Are they concise and easy to read? Do they help you understand what is on the plot? Would you have worded the descriptions differently?"
  },
  {
    "objectID": "mutant.html#mutant-bars",
    "href": "mutant.html#mutant-bars",
    "title": "5  Beware: Mutant!",
    "section": "5.1 Mutant bars",
    "text": "5.1 Mutant bars\nBar charts are a very popular and clear way to convey information. This is provided that we follow one rule: the bars must start at zero. When looking at the bars, our eye implicitly compares the ratio of their lengths, it’s simply how we interpret this kind of graphs. For this to make sense, the bars must start at zero.\n\nIn the article Drożejąca energia podnosi koszty utrzymania mieszkań, the author went to great lengths to convince the reader that energy prices are rising at a frightening rate. Looking at the chart below, one gets the impression that the cost of real estate is rising rapidly, which is consistent with the article. However, it is not consistent with the numbers shown in the chart. On a nine-month basis, the 3.4% increase was comparable to inflation, but the chart suggests a much more serious price increase, since the length of the bar, representing costs, has more than doubled.\n\n\n\n\nFigure 5.1: Chart showing average personal housing costs in different months of 2011. Source: article Drożejąca energia podnosi koszty utrzymania mieszkań from business.co.uk.\n\n\n\nIn 2021, one of the leaders in the poll for the worst chart of the year was the chart from TVP 1 Health spending as % of GDP shown in Figure 5.3. The bars starting at 4% visually increase the growth of health spending in recent years. You have to admit, that 7% looks majestic against the pale of 4.5%–5%. The first 7 bars show a period of 7 years and give the impression that nothing has changed over the years, the last 5 bars show selected years over the next 12 years, further suggesting dynamic growth. What happened to the years 2017-2019 and 2024-2026? Half of the last bars show projections, not expenses incurred.\n\n\n\n\nFigure 5.2: A 2021 chart from TVP 1 describing the change in health care spending\n\n\n\nHow much of a grotesque can we get if the bars don’t start at zero? Let the chart below showing the difference between men and women in their responses to the question of whether they have ever participated in loyalty programs be a warning. The difference between the two groups is exactly 0.3 of a percentage point. Is this actually a difference worth highlighting in this way?\n\n\n\n\nFigure 5.3: Chart from ABC Market and Opinion report published on the egospodarka platform"
  },
  {
    "objectID": "mutant.html#mutant-circles",
    "href": "mutant.html#mutant-circles",
    "title": "5  Beware: Mutant!",
    "section": "5.2 Mutant circles",
    "text": "5.2 Mutant circles\nPie charts have their staunch opponents due to the difficulty in accurately reading the data presented. If you plan to present charts to a sophisticated audience, consider options other than a colorful cake. The only situation in which a pie chart will somehow defend itself is when presenting the components of a whole. This is virtually the only permissible use that will not result in dangerous consequences. This was forgotten by the authors of the following charts.\n\n\n\n\nFigure 5.4: Graph from the City of Wrocław website from 2017. The areas of the circle slices are proportional to the area of the cities shown\n\n\n\nThe first example comes from the official website of the city of Wroclaw. The area and population of five cities are compared against Wrocław. What kind of graph should be used for this purpose? Certainly not a pie chart. Can you see on this graph that Łódź has a slightly larger area than Wroclaw, and Gdańsk, like Poznań, has an area more than 10% smaller than Wrocław?\n\nUnfortunately, this is not the only case of using pie charts to poison susceptible minds. In the chart below, the different sections of the circle represent the prices of running a meter of pipe with different cross sections. Not only does the sum of these prices add up to nothing, but the use of perspective has the effect of expanding the cutouts at the top and bottom and narrowing the cutouts in the middle.\n\n\n\n\nFigure 5.5: Prices for running a meter of pipe with different cross sections are shown as a section of a circle slice. The chart comes from inzynierbudownictwa.pl"
  },
  {
    "objectID": "mutant.html#mutant-axes",
    "href": "mutant.html#mutant-axes",
    "title": "5  Beware: Mutant!",
    "section": "5.3 Mutant axes",
    "text": "5.3 Mutant axes\nUnfortunately, visual criminals harm chart axes in various ways. Although this crime is still not prosecuted by law, it is worth knowing what to look out for to avoid an unpleasant situation.\n\n\n\n\n\nFigure 5.6: The incidence of measles in Poland. The left graph is from the tvn24.pl website. The right graph shows complete data from 2005-2017\n\n\n\n\nThe chart above, which comes from the pages of a major news station in Poland, shows the number of measles cases in Poland. The conclusion comes to mind, there are more and more cases of the disease. But… why are only cases in even-numbered years shown? When complete data for a period of 13 years is presented (see the right panel), the situation looks different.\n\nSome omit inconvenient years, others add something here and there. These are equally hedious crimes against information. Below is an example of a chart from the Science in Poland 2013 report, which shows declared spending on R&D (research and development).\n\n\n\n\nFigure 5.7: Declared spending on research and development. Source: the Science in Poland 2013 report prepared by the Ministry of Science and Higher Education.\n\n\n\nThis chart shows significant increases in declared spending, which the report says builds a backdrop of increasing innovation in companies. Unfortunately, if you take a closer look, you’ll find that the last bar shows aggregate spending over four years (or, more accurately, refers to plans for the next four years). If you divide the planned spending by four years, you get the amount of 1215 million PLN, which is a decrease of about 5% compared to 2012. This “innocent” aggregation on the horizontal axis has significantly changed the perception of the data presented.\n\n\n\n\nFigure 5.8: Consistently implementing the plan to raise teachers’ salaries – this is a tweet from profile of the Ministry of Education and Science from the year 2019. https://twitter.com/MEIN_GOV_PL/status/1109050109785001985\n\n\n\nA few years later, the Ministry of Education, under a different government, tweeted the graph shown in Figure 5.8. The intention is quite obvious, there will be more and more money for teacher payraises. More and more by the year, and by the end it’s so much that it barely fits on the graph.\n\nBut keep in mind that the last bar is the sum of 2017-2020 (it could just as well be the sum of 2014-2020). When one subtracts the numbers shown in previous years from this 6.3 billion, it turns out that in 2020 there will be 1.4 billion zlotys for the raise, more than twice as much as in 2019. The numbers seem to be there, but if this decrease were shown, the trend would no longer be so consistent.\n\nThe following chart from a major news portal shows the pension amount. The problem with this chart is the choice of ranges presented on the horizontal axis. They correspond to very different ranges of values, sometimes 100 PLN, sometimes 200 PLN, and sometimes 500 PLN. Because of this, the heights of the bars are not comparable with one another. Someone could inadvertently read it so that the most people get the highest pension, above PLN 3,500. However, if somebody else might choose other ranges on the horizontal axis to get a different story.\n\n\n\n\nFigure 5.9: Chart from wyborcza.biz showing pension distribution, from the year 2016\n\n\n\nGraphs are often used to show changes over time. However, it is important to remember that time should always run to the right, otherwise the reader can be led astray.\n\nThe chart below from 2015 shows the results of a preference poll before the presidential election in Poland. Are the poll results for Bronisław Komorowski better than the previous month, or worse? This example vividly demonstrates the importance of the order of the bars on a graph. If one reads this chart without looking into the legend, one might get the impression that support for Bronisław Komorowski is growing. However, when you look at the legend, it turns out that the right, blue bar is the support in January, and the left – in February.\n\n\n\n\nFigure 5.10: Graph showing changes in political preference support. The data is distorted by several elements: added pseudo-perspective and pretended third dimension, the direction in which the bars are pointing, the height of the bar for Janusz Korwin-Mikke, which does not correspond to the number shown. Source: TVP Info.\n\n\n\nThe chart below is from 2020 from the main news edition presented on TVP Channel 1. It shows the change in unemployment, but here too the time runs to the left instead of to the right. A less attentive viewer may get the impression that unemployment has fallen, although it has actually increased by 0.9 of a percentage point.\n\n\n\n\nFigure 5.11: A chart from 2020 showing the unemployment rate. The chart was presented on TVP Channel 1. Unemployment has increased year-on-year, but the way it is presented may suggest that it has decreased"
  },
  {
    "objectID": "mutant.html#mutant-colors",
    "href": "mutant.html#mutant-colors",
    "title": "5  Beware: Mutant!",
    "section": "5.4 Mutant colors",
    "text": "5.4 Mutant colors\nColor is a very powerful spice in the world of charts. However, it is important to use it correctly. The rule to follow is to mark similar things with similar colors, and different things with different colors.\n\n\n\n\nFigure 5.12: Graph sourced from Rzeczpospolita, from the year 2021 with answers to the question of whether narrowing streets in Warsaw is a good idea\n\n\nThe graph in Figure 5.12 is from the Rzeczpospolita website, and may suggest that less than half (49%) of those asked think that narrowing streets in Warsaw is a good idea. Perhaps the first impression would be different if the two parts coding the number of people supporting the idea were marked in a similar color (that would be 17% + 49%), and the only opposing answer was marked in a contrasting color.\n\nThere you go, what a surprise – more than 4 times as many people think it’s a good idea to narrow streets than that it discriminates against drivers. But this chart doesn’t capture that proportion very well. The culprits this time are the poorly chosen colors."
  },
  {
    "objectID": "mutant.html#tasks",
    "href": "mutant.html#tasks",
    "title": "5  Beware: Mutant!",
    "section": "5.5 Tasks",
    "text": "5.5 Tasks\nType the word “report” into an Internet search engine and open the first few links. Usually newer documents are higher in the results, so you’ll probably find some new government report or something from the national bank or another source. It’s time to take a closer look at the content.\n\n\n\n\n\n\nSource: https://bit.ly/3WpiWsH\n\n\n\nTry to find a bar plot in the report you found. Do the bars start at zero? Do their lengths make it easier to understand key information on the chart more quickly?\nLook for a pie chart in the report you found. Do the circle slices correspond to parts of the whole? When looking at the pie chart slices themselves, is it easy to see what story the chart is telling?\nLook at the graph in the margin, it shows the average height of women in different countries. Is the data presented correctly? What is the problem with this presentation?"
  },
  {
    "objectID": "code_it.html#setup",
    "href": "code_it.html#setup",
    "title": "6  Code It Yourself",
    "section": "6.1 Setup",
    "text": "6.1 Setup\nIn this chapter, we present instructions that allow you to reproduce the charts from the Tested Recipes chapter. In order for the commands presented below to work, you must first install the R program. It can be downloaded from https://cran.r-project.org/. Then install the statistical package ggplot2, which can be done with the install.packages(\"ggplot2\") instruction typed into the running R program.\n\nAfter installing the necessary components, enable this package with the library() command. After following these instructions, we have access to the graphical functions described below.\n\nlibrary(\"ggplot2\")\nlibrary(\"ggthemes\")\nNow we need data that we can represent in graphs. The ggplot2 package (like many other tools) assumes that the data is in tabular form, where variables are included in the columns and observations are included in the rows.\n\nThe examples presented in this chapter are based on the food data we have already learned about in the Recipes chapter. The data is contained in the BetaBit package and will be available in the food dataset after installing and loading this package. Note that food_mini is a smaller subset of the original data.\n\nlibrary(\"BetaBit\")\nhead(food_mini)\nAfter loading the graphics package and data, we are ready to create charts. Below are the relevant step-by-step instructions.\n\nCreating a graph in the ggplot2 package is a very interactive and iterative process. In each iteration, something is added or removed to the chart and you look for the next thing to improve. This allows for a gradual improvement of the chart and builds valuable habits of systematic data mining, which are so useful when working with data. Below, alongside the following instructions, we show what the chart looks like at a given stage."
  },
  {
    "objectID": "code_it.html#histogram---step-by-step",
    "href": "code_it.html#histogram---step-by-step",
    "title": "6  Code It Yourself",
    "section": "6.2 Histogram - step by step",
    "text": "6.2 Histogram - step by step\nOur first graph will be a histogram showing the distribution of energy values for the products available in the dataset.\n\nStep 1 – Data and axes.\n\n\n\n\n\n\nFigure 6.1: Backbone of the chart - data and axes.\n\n\nThe creation of each graph begins by specifying what data it is based on and which variables from that data will be represented on the axes. In this case, we will be working on the food dataset and we are interested in the distribution of values of the Energia variable\n\nWe create the backbone of the chart with the following command:\n\nggplot(data = food_mini, aes(x = Energy))\n\nStep 2 – Histogram.\n\n\n\n\n\n\nFigure 6.2: We add a histogram geometry, showing the distribution of the energy value of food products\n\n\nThe types of graphical representations of data in the ggplot2 package are called geometries. There are many of them available, corresponding to functions with names starting with the prefix geom_. In this case, the geom_histogram() geometry draws a histogram for a predefined variable.\n\nThe syntax of the ggplot2 package assumes adding more elements to the skeleton of the graph. Hence, a graph with histogram geometry is constructed with the following command:\n\nggplot(data = food_mini, aes(x = Energy)) +\n  geom_histogram(color = \"white\")\n\nStep 3 – Small multiples.\n\n\n\n\n\n\nFigure 6.3: Small multiples – A series of graphs for each group. For readability of the graph, we have limited ourselves to a selection of four of them\n\n\nOne way to compare the distribution of a variable between groups is to use the small multiples technique. The data are presented on a grid of graphs with the same axes, but representing subsets of observations. This makes it easier to see the similarities and differences between the groups.\n\nIn the ggplot2 package, this effect can be achieved by adding the facet_wrap command and indicating which variable is used for grouping.\n\nThe visualization presented in the margin makes it quick to see that the energy value of fish is, on average, lower than products from the meat, sweets or nuts group.\n\nggplot(data = food_mini, aes(x = Energy)) +\n  geom_histogram(color = \"white\") +\n  facet_wrap(~Group)\n\nStep 4 – Graphic Theme.\n\n\n\n\n\n\nFigure 6.4: Theme based on charts from “The economist”\n\n\nWe already have the main content on the chart, it’s time for visual polishing. The ggplot2 package is highly customizable, you can control virtually every detail of the chart. The theme() function is used for this.\n\nHowever, since the world does not end with one chart, we want to generate hundreds of visually similar charts, so when working on details, one often chooses one of the predefined graphical themes, also called skins. Theme names begin with the prefix theme_. Below we will add a graphical theme reminiscent of charts from “The Economist” newspaper.\n\nggplot(data = food_mini, aes(x = Energy)) +\n  geom_histogram(color = \"white\") +\n  facet_wrap(~Group) +\n  theme_economist()\n\nStep 5 – Title and axis labels. \n\n\n\n\n\nFigure 6.5: Title, subtitle, axis labels. Without these additions, no chart is complete\n\n\nEvery chart obligatorily needs clear descriptions of the axes, title and subtitle. Without them, we run the risk that the reader will not understand what is shown on the chart. To specify these graphical elements, we can use the labs() function.\n\nggplot(data = food_mini, aes(x = Energy)) +\n  geom_histogram(color = \"white\") +\n  facet_wrap(~Group) +\n  labs(title = \"Energy value of the products\", \n    subtitle = \"per 100 g of product\", \n    x = \"Energy value\", y = \"The number of\") +\n  theme_economist()"
  },
  {
    "objectID": "code_it.html#themes-and-skins",
    "href": "code_it.html#themes-and-skins",
    "title": "6  Code It Yourself",
    "section": "6.3 Themes and skins",
    "text": "6.3 Themes and skins\nOn the chart, in addition to elements representing data, there are also very important elements unrelated to data. For example: the background, the typeface title or the size of the labels on the axes.\n\n\n\n\n\nFigure 6.6: Example themes available in the ggplot2 package. The theme name is in the chart title"
  },
  {
    "objectID": "code_it.html#scatterplot---step-by-step",
    "href": "code_it.html#scatterplot---step-by-step",
    "title": "6  Code It Yourself",
    "section": "6.4 Scatterplot - step by step",
    "text": "6.4 Scatterplot - step by step\nLet’s look at two nutrients of our products – the amount of protein and fats.\n\nStep 1 – Data and axes.\n\n\n\n\n\n\nFigure 6.7: Backbone of the chart - data and axes.\n\n\nEach graph starts with data. We again use the ggplot() function to build the skeleton of the graph. We again use the food data. We will plot the amount of protein on the X axis and the amount of fat in 100 g of product on the Y axis.\n\nggplot(data = food, aes(x = Protein, y = Fats)) \n\nStep 2 – Scatterplot.\n\n\n\n\n\n\nFigure 6.8: We add a geometry that presents data using dots, ideal for looking for correlations and relationships between two variables\n\n\nNow comes the time to choose a geometry. To draw a dot plot, we will use the geom_point() geometry. The coordinates of the points are determined by the first two variables indicated earlier by the aes() function.\n\nOf course, the total protein and fat content cannot be more than 100%. Among the products, we see some that have very little of either component, and some that have one of these components within the range of 15-35%. The chart also allows us to see that there are several products with extremely high protein or fat content.\n\nggplot(data = food, aes(x = Protein, y = Fats)) +\n    geom_point() \n\nStep 3 – Mapping of color, size and other attributes.\n\n\n\n\n\nFigure 6.9: The color of the point represents the variable Grupa, and the size of the point represents the variable Energia\n\n\nThe ggplot2 package allows you to create charts in a declarative way. If we want the chart to color code some variable, such as a group of food products, it is enough to mark such a mapping in the mapping declaration. We don’t need to say what this mapping should look like, what and how many colors to use, this will be taken care of by the ggplot2 package itself. All we need to do is in the mappings block in the aes() function to indicate which variable determines which attribute.\n\nIn the following example, we request that the Grupa variable be indicated on the graph by the color of the points, and the Energy variable by the size of the points. Note that a legend for these two characteristics will automatically appear on the graph.\n\nggplot(data = food, aes(x = Protein, y = Fats,\n            color = Group, size = Energy)) +\n    geom_point() \n\nStep 4 – Controling the mappings.\n\n\n\n\n\nFigure 6.10: Colors of the points are determined by the Dark2 palette for qualitative scales\n\n\nBut what if we don’t like the proposed mapping? We would like a different color scheme or a different range of point sizes. We have complete control over each mapping through functions that set the scales of the graph. Such functions have a name starting with the prefix scale_, then there is the name of the graph attribute, and the third part specifies how this attribute is to be constructed.\n\nFor example, if we wanted to change the way we specify the color scale so that we use ColorBrewer colors, we can use the scale_color_brewer() function to do so. All we need to do is specify what color palette we want to use in the chart.\n\nggplot(data = food, aes(x = Protein, y = Fats,\n            color = Group, size = Energy)) +\n    geom_point() +\n    scale_color_brewer(type = \"qual\", palette = \"Dark2\") \n\nStep 5 – Title, axes labels and theme\n\n\n\n\n\nFigure 6.11: Final touches, changing the skin, adding title, subtitle and axes labels\n\n\nWe have the main content – it’s time for graphical details, chart skins, axis titles, main title and subtitle. Below we use the functions that have already appeared when discussing the histogram. However, it is important to always supplement the chart with the appropriate annotations, without this it may not be readable by the viewer.\n\nggplot(data = food, aes(x = Protein, y = Fats,\n            color = Group, size = Energy)) +\n    geom_point() +\n    scale_color_brewer(type = \"qual\", palette = \"Dark2\") +\n    labs(title = \"Share of protein and fats\", subtitle = \"per 100 g of product\", \n      y = \"Fats [g]\", x = \"Protein [g]\") + \n    theme_gdocs()"
  },
  {
    "objectID": "code_it.html#mappings-of-the-variables",
    "href": "code_it.html#mappings-of-the-variables",
    "title": "6  Code It Yourself",
    "section": "6.5 Mappings of the variables",
    "text": "6.5 Mappings of the variables\nThe key concept behind the philosophy of the ggplot2 package is the declarative definition of what variables should be represented on the chart and what role they should play. These declarations appear inside the aes() (aesthetics) function.\n\nAfter declaring what the variable should do on the chart, the ggplot2 package will automatically take care of converting the value of the variable into coordinates of points on the chart. The chart below illustrates the mapping concept with an example of four variables for a dot plot.\n\n\n\n\nFigure 6.12: A scatterplot that shows for each point four different attributes of the point using coordinates in the X axis, Y axis, point size and color"
  },
  {
    "objectID": "code_it.html#scales-for-the-mappings",
    "href": "code_it.html#scales-for-the-mappings",
    "title": "6  Code It Yourself",
    "section": "6.6 Scales for the mappings",
    "text": "6.6 Scales for the mappings\nTypically, scales are created automatically, but there are situations where you want to turn off autopilot and take control of how the data is transformed into your own hands. The ggplot2 package allows you to specify the encoding of each graphical attribute. Scales are defined globally for the entire graph and are applied to all layers uniformly.\n\nOne of the most commonly changed scales is the color scale. It is changed not because the default colors are bad, but often because we want to increase readability for people with color vision dysfunctions, or we have our own individual preferences in this regard.\n\n\n\n\nFigure 6.13: When defining color scales in the ggplot2 package, we need to specify two elements. First, how many different values we have to encode. Second, what kind of variable we are working with: whether it is an ordered scale, a scale with a neutral element, or a qualitative scale. The figure shows the colors proposed by Cynthia Brewer to represent the eight colors for qualitative variables (first column) and quantitative variables with or without a neutral element (next two columns). The palette can be selected by name (e.g., Dark2) or by number (e.g., 7)\n\n\nAnother very interesting attribute besides color is the size of the dot. It allows you to encode continuous variables – the larger the value of a variable, the larger the dot.\n\nFor qualitative variables, an interesting option to code their values is to use shapes. The default shape scale includes basic geometric figures, hollow and filled triangles, squares and circles. An alternative to geometric shapes is to use consecutive letters of the alphabet. An interesting discussion of the pros and cons of various shapes is posted in the article Points of view: Plotting symbols (Krzywinski and Wong 2013). We also recommend the other articles in the Points of view article series.\n\n\nKrzywinski, Martin, and Bang Wong. 2013. “Points of View: Plotting Symbols.” Nature Methods 10 (6): 451–51. http://dx.doi.org/10.1038/nmeth.2490."
  },
  {
    "objectID": "code_it.html#boxplot---step-by-step",
    "href": "code_it.html#boxplot---step-by-step",
    "title": "6  Code It Yourself",
    "section": "6.7 Boxplot - step by step",
    "text": "6.7 Boxplot - step by step\nLet’s see how to construct a boxplot. And by the way, we will also see how to enrich such a plot with several additional layers representing complementary perspectives.\n\nStep 1 – Data and axes.\n\n\n\n\n\nFigure 6.14: Backbone of the chart - data and axes\n\n\nFollowing the pattern of previous plots, we also start this one by determining what data will be used to prepare the chart, here food, and what variables should be on the axes – here we want to show the energy content of products by food groups, both variables go to the aes() function.\n\nggplot(data = food, aes(x = Group, y = Energy)) \n\nStep 2 – Boxplot.\n\n\n\n\n\nFigure 6.15: We add a boxplot geometry\n\n\nIt’s time to choose a geometry. For a boxplot it is geom_boxplot(). Most geometries allow you to specify additional arguments. Here, we set the width of the box plot, smaller than the default (this will come in handy later), and mark which observations are to be treated as outliers. The coef parameter is used for this, setting it to 100 means that outliers will not be identified, and the graph whiskers will span from the minimum to the maximum value in a given group.\n\nggplot(data = food, aes(x = Group, y = Energy)) +\n  geom_boxplot(width = 0.2, coef = 100) \n\nStep 3 – Plot rotation.\n\n\n\n\n\nFigure 6.16: We rotate the axes of the plot for better readability\n\n\nBy default, boxplots are drawn vertically (just like a histogram or bar plot). But this solution has several disadvantages. One is that the full names of the presented values may not fit on the x-axis of the chart. Another is that the plot has more resolution in the horizontal axis than in the vertical axis.\nFunctions that control the plot’s axes have names that begin with the prefix coord_. For example, coord_flip() swaps the axes of the graph.\n\n\nggplot(data = food, aes(x = Group, y = Energy)) +\n  geom_boxplot(width = 0.2, coef = 100) +\n  coord_flip()\n\nStep 4 – More layers with data.\n\n\n\n\n\nFigure 6.17: Wee add more complementary layers, including dashes on the axis or violin chart\n\n\nWe can have any number of layers with different geometries on the plot. Combining geometries in this way is a powerful mechanism to complement different aspects of the data.\nWe have written before about how box plots don’t show multimodal distributions well, so we’ll add a second layer with violin plots (i.e. geom_violin()) to this chart. This will allow us to read both the quartiles and the modes of the distribution. In addition, we will add markers on the bottom axis to indicate where each observation is, using the geom_rug() geometry.\n\n\nggplot(data = food, aes(x = Group, y = Energy)) +\n  geom_rug(sides = \"l\") +\n  geom_violin(scale = \"width\", fill = \"grey\") +\n  geom_boxplot(width = 0.2, coef = 100) +\n  coord_flip()\n\nStep 5 – Layer with descriptions.\n\n\n\n\n\nFigure 6.18: One more layer – with the names of the products with the highest caloric content\n\n\nThe plot already has three layers, but there is still room to add additional useful information. So let’s add the names of the products with the highest calories. We will add the names with the geometry for captions, namely geom_text(). Below is an example of how to use this geometry.\nIn each geometry, you can specify local data with the data= argument. By default, geometries take the data indicated in the ggplot function, but you can also specify data for each layer separately.\n\n\nggplot(data = food, aes(x = Group, y = Energy)) +\n  geom_rug(sides = \"l\") +\n  geom_violin(scale = \"width\", fill = \"grey\") +\n  geom_text(data = food_max, aes(label =  Name), \n     hjust = 0, vjust = 0, color = \"blue4\") + \n  geom_boxplot(width = 0.2, coef = 100) +\n  coord_flip()\nThe food_max dataset should be prepared in advance. To shorten this example we have placed the ready-made dataset in the BetaBit package.\n\n\nStep 6 – Title, axes labels and theme.\nWe have the main content, it’s time to define the graphic details, the plot theme, the axis titles and the main title and subtitle. Below we use the functions that have already appeared when discussing the histogram. However, it is important to always supplement the chart with the appropriate annotations, without this it may not be readable by the viewer.\n\nggplot(data = food, aes(x = Group, y = Energy)) +\n  geom_rug(sides = \"l\") +\n  geom_violin(scale = \"width\", aes(fill = Group)) +\n  geom_text(data = food_max, aes(label =  Name), \n     hjust = 0, vjust = 0, color = \"blue4\") + \n  geom_boxplot(width = 0.2, coef = 100) +\n  coord_flip() + \n  labs(title = \"Distribution of energy value\", subtitle = \"per 100 g\") +\n  theme_gdocs() + theme(legend.position = \"none\")"
  },
  {
    "objectID": "code_it.html#layers",
    "href": "code_it.html#layers",
    "title": "6  Code It Yourself",
    "section": "6.8 Layers",
    "text": "6.8 Layers\nAs we have seen in the example of the boxplot, a unique capability of the ggplot2 package is to assemble together on a single chart different layers presenting different aspects of the same data. Typically, these layers represent the data in varying detail. Each layer consists of a single geometry defined by the geom_ function, but we can simply add geometries to each other.\n\n\n\n\nFigure 6.19: A chart consisting of four layers. The individual components are shown below"
  },
  {
    "objectID": "code_it.html#reproducibility",
    "href": "code_it.html#reproducibility",
    "title": "6  Code It Yourself",
    "section": "6.9 Reproducibility",
    "text": "6.9 Reproducibility\nAn important advantage of the ggplot2 package is the reproducibility of the plot generation process. Plots are the result of a sequence of instructions in a programming language. If, after 10 years, we want to reproduce a plot from a given sequence, nothing simpler, just copy a given piece of code to the R program console. The plots are not “clicked” in one tool or another. We get a record of the plot, which can be reproduced or modified at any time.\nReproducibility of results, and therefore of plots, is the foundation of scientific publications, but also of any decent report. If we see a graph with interesting relationships in a report or publication, isn’t it natural to expect that the chart in question can be reproduced?"
  },
  {
    "objectID": "code_it.html#tasks",
    "href": "code_it.html#tasks",
    "title": "6  Code It Yourself",
    "section": "6.10 Tasks",
    "text": "6.10 Tasks\nThe best way to develop programming skills in the ggplot2 package is to ask questions to the data and then learn how to make a plot that answers the question. Below you will find suggestions for a few questions to warm up.\n\n\nPlot a histogram of the amount of water in different products. Mark a group of products with a color. Scale the bars for successive ranges to make it easier to see the proportion of a certain group in products with a given water content.\n\nSelect sweets from the data and mark them on the scatter plot, showing the sugar content and the fat content. Which products deviate most from the central point cloud? Mark the names of the few outliers on the plot.\nUse a boxplot to compare the sugars content, and another to compare the fats content, between different groups of products.\n\n\n\n\nThose who would like to learn more deeply about the program and the ggplot2 package can find a lot of detailed information in the book ggplot2: elegant graphics for data analysis (Wickham 2009).\nSimilar graphing rules for the Julia language are implemented in the Gadfly package, and for the Python language in the matplotlib package.  \n\n\n\nWickham, Hadley. 2009. Ggplot2: Elegant Graphics for Data Analysis. Springer New York. http://had.co.nz/ggplot2/book."
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Anscombe, Frank. 1973. “Graphs in Statistical Analysis.”\nThe American Statistician 27: 17–21.\n\n\nBrewer, Cynthia. 1994. “Color Use for Mapping and\nVisualization.” Visualization in Modern Cartography,\n123–47.\n\n\n———. 2022. ColorBrewer: Color Advice for Maps. http://colorbrewer2.org/.\n\n\nCleveland, William, and Robert McGill. 1987. “Graphical Perception: The Visual Decoding of Quantitative\nInformation on Statistical Graphs.” of the Royal\nStatistical Society Series A 150: 192–229.\n\n\nGłówny Urząd Statystyczny. 2012. Narodowy Spis Powszechny Ludności i\nMieszkań 2011. Raport z Wyników.\n\n\nGoethe, Johann Wolfgang von. 1810. Zur Farbenlehre / Theory of\nColours. J.G. Cotta Tubingen.\n\n\nKrzywinski, Martin, and Bang Wong. 2013. “Points of View: Plotting\nSymbols.” Nature Methods 10 (6): 451–51. http://dx.doi.org/10.1038/nmeth.2490.\n\n\nMcLean, Matt. 2017. The Economist Visual Styleguide. https://design-system.economist.com/.\n\n\nNeurath, Otto. 1940. “Modern Man in the Making.”\nPhilosophy of Science 7 (1): 133–34. https://isotyperevisited.org/.\n\n\nRIVM, the Dutch National Institute for Public Health, and the\nEnvironment. 2021. Dutch Food Composition Database (NEVO). https://www.rivm.nl/documenten/nevo-online-versie.\n\n\nSimons, Daniel, and Christopher Chabris. 1999. “Gorillas in our midst: Sustained inattentional blindness\nfor dynamic events.” Perception 28: 1059–74.\n\n\nSnow, John. 1849. “On the Mode of Communication of\nCholera.” Edinburgh Medical Journal 1: 668–70.\n\n\nStatistics Poland. 2017. Statistical Maps. Data Visualisation\nMethods. Statistical Research Papers. https://stat.gov.pl/statystyka-regionalna/publikacje-regionalne/podreczniki-atlasy/podreczniki/statistical-maps-data-visualisation-methods,3,1.html.\n\n\nThe IBCS Institute. 2022. The International Business Communication\nStandards (IBCS). https://www.ibcs.com/.\n\n\nTufte, Edward. 2001. The Visual Display of Quantitative\nInformation. Cheshire, Connecticut: Graphics Press.\n\n\nWickham, Hadley. 2009. Ggplot2: Elegant Graphics for Data\nAnalysis. Springer New York. http://had.co.nz/ggplot2/book.\n\n\nWilkinson, Leland. 1999. The Grammar of Graphics. New York:\nSpringer.\n\n\nZeileis, Achim, Kurt Hornik, and Paul Murrell. 2009. “Escaping\nRGBland: Selecting Colors for Statistical Graphics.”\nComputational Statistics and Data Analysis 53 (9): 3259–70."
  }
]